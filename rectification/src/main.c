/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////// DIRECTIVES /////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
# include <stdlib.h>
# include <stdio.h>
# include <unistd.h>
# include <string.h>

#include <sys/types.h>
#include <sys/wait.h>

# include "rectification.h"

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////// MAIN ////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// - INPUTS: - argv[1]: Cantidad de imagenes de entrada
// - OUTPUTS: -
// - DESCRIPTION: Ejecuta la etapa de "rectification" del pipeline, a cada imagen de entrada

int main(int argc, char** argv) {

    int i;
    char* number_images = argv[1];

    for (i = 0; i < atoi(number_images); i++) {
        Image image;
        read(STDIN_FILENO, &image, sizeof(Image));
        rectification (&image);
        write(STDOUT_FILENO, &image, sizeof(Image));
        
    }
    wait(NULL);
    return 0;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////