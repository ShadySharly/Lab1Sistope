/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////// DIRECTIVES /////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
# include <stdlib.h>
# include <stdio.h>
# include <unistd.h>
# include <string.h>

# include "../../structs.h"

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////// FUNCTIONS //////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// - INPUTS: - image: Estructura Image con la informacion de una imagen en particular, proveniente del pooling
//           - threshold: Numero entero que corresponde al umbral para determinar si una imagen es "nearly black"
// - OUTPUTS: -
// - DESCRIPTION: Toma una imagen de entrada y se determina si el porcentaje de pixeles negros (valor 0) es mayo al umbral (threshold) dado

void clasification (Image* image, int threshold) {

    int n, m, current_pixel, black_pixels_percentage;
    int total_pixels = (image -> height) * (image -> width);
    int black_pixels = 0;

    for (n = 0; n < (image -> height); n++) {

        for (m = 0; m < (image -> width); m++) {
            current_pixel = image -> matrix[n][m];

            if (current_pixel == 0)
                black_pixels++;
        }
    }

    black_pixels_percentage = (black_pixels * 100) / total_pixels;

    if (black_pixels_percentage >= threshold)
        image -> nearly_black = 1;
    
    image -> nearly_black = 0;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////